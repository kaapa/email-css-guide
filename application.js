(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c=Object.prototype.hasOwnProperty,d=function(a,b){function e(){this.constructor=a}for(var d in b)c.call(b,d)&&(a[d]=b[d]);e.prototype=b.prototype,a.prototype=new e,a.__super__=b.prototype;return a};if(typeof a=="undefined"||a===null)a=window;a.CssGuide=function(){function a(){}a.intersection=function(a,b){var c,d,e,f;f=[];for(d=0,e=a.length;d<e;d++)c=a[d],-1<jQuery.inArray(c,b)&&f.push(c);return f},a.trim=function(a){return a.replace(/^\s*/,"").replace(/\s*$/,"")},a.Controller=function(){function a(a,c,d){var e,f,g,h,i;this.suite=a,this.form=c,this.table=d,f=$("div:nth-child(2)",this.form),h=$("[name='client[]']").closest("label").remove(),i=this.suite.getClients();for(g in i)e=i[g],f.append(h.clone().append(e.name).find("input").val(g).end());$("[data-match-id]").live("mouseenter",function(){var a,b,c,d,e;d=$(this).attr("data-match-id").split(" "),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push($("[data-match-id~='"+a+"']").addClass("highlight"));return e}),$("[data-match-id]").live("mouseleave",function(){var a,b,c,d,e;d=$(this).attr("data-match-id").split(" "),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push($("[data-match-id~='"+a+"']").removeClass("highlight"));return e}),this.form.bind("submit",b(function(a){a.preventDefault();return this.test($("textarea",this.form.markup).val(),this.getSelectedClients())},this))}a.prototype.test=function(a,b){var c,d,e,f;this.table.html(""),a=this.suite.execute(a,b),f=a.split("\n");for(c=0,e=f.length;c<e;c++)d=f[c],this.table.append("<tr>\n  <th>"+(c+1)+'</th>\n  <td style="padding-left:'+d.match(/^(\s*)/)[1].length+'em">'+d+"</td>\n</tr>");return $("#results").show()},a.prototype.getSelectedClients=function(){var a,b,c,d,e;d=$("[name='client[]']:checked",this.form),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],e.push(a.value);return e};return a}(),a.Parser=function(){function b(a){var b,c,d,e,f,g,h;this.tokens=[],g=$("style",a);for(c=0,e=g.length;c<e;c++)b=g[c],""!==$(b).html()&&(this.tokens=this.tokens.concat(this.parse(b)));h=$("[style]",a);for(d=0,f=h.length;d<f;d++)b=h[d],""!==$(b).attr("style")&&this.tokens.push(this.parse(b))}b.prototype.findByProperty=function(a){var b,c,d,e,f;e=this.tokens,f=[];for(c=0,d=e.length;c<d;c++)b=e[c],b.css[a]!==void 0&&f.push(b);return f},b.prototype.parse=function(b){var c,d,e,f,g,h,i,j;if("STYLE"===b.nodeName)return[];e={selector:b,css:{}},i=$(b).attr("style").split(";");for(g=0,h=i.length;g<h;g++)d=i[g],j=d.split(":"),c=j[0],f=j[1],e.css[a.trim(c)]=a.trim(f);return e};return b}(),a.Suite=function(){function b(){}b.registry=[],b.defineTest=function(a){return this.registry.push(a)},b.prototype.createDocument=function(a){$("iframe").remove(),$('<iframe name="tokenizer" style="display:none;"></iframe>').appendTo(window.document.body),window.frames.tokenizer.document.write(a);return window.frames.tokenizer.document},b.prototype.execute=function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;d==null&&(d=0),b=b.replace(/<(?!\/)([^>]+)>/gi,function(a,b){return"<"+b+' data-node-id="'+d++ +'">'}),g=b.replace(/type="(text\/javascript)"/g,'type="text/disabled-javascript"'),e=this.createDocument(g),m=new a.Parser(e),v=this.constructor.registry;for(f=0,r=v.length;f<r;f++){n=v[f];if(a.intersection(n.clients,c).length){w=n.callback(e,m);for(o=0,s=w.length;o<s;o++){i=w[o];if(i.length)for(p=0,t=i.length;p<t;p++)h=i[p],j=$(h).attr("data-match-id")?$(h).attr("data-match-id")+" "+f:f,$(h).attr("data-match-id",j)}}}g=e.documentElement.innerHTML,x=g.match(/<[^>]+data-match-id="[^"]+"[^>]*>/gi);for(q=0,u=x.length;q<u;q++)h=x[q],h!=null&&(l=(y=h.match(/data-node-id="([^"]+)"/i))!=null?y[1]:void 0,k=(z=h.match(/data-match-id="([^"]+)"/i))!=null?z[1]:void 0,b=b.replace(new RegExp('data-node-id="'+l+'"'),'data-match-id="'+k+'"'));b=b.replace(/\sdata-node-id="[^"]+"/gi,""),b=b.replace(/<([^>]+?)\s?data-match-id="([^"]+)"([^>]*)>/gi,'{span class="match" data-match-id="$2"}<$1$3>{/span}'),b=jQuery("<div/>").text(b).html();return b=b.replace(new RegExp('{span class="match" data-match-id="([^"]+)"}(.+?){/span}',"g"),'<span class="match" data-match-id="$1">$2</span>')},b.prototype.getClients=function(){return this.constructor.clients};return b}(),a.EmailSuite=function(){function b(){b.__super__.constructor.apply(this,arguments)}d(b,a.Suite),b.clients={android_email:{name:"Android Email"},android_gmail:{name:"Android Gmail"},aol_10:{name:"AOL Desktop 10"},aol_web:{name:"AOL Web"},apple_iphone_3:{name:"Apple iPhone 3.0"},apple_mail:{name:"Apple Mail"},blackberry:{name:"Blackberry"},entourage_04:{name:"Entourage 2004"},entourage_08:{name:"Entourage 2008"},gmail:{name:"Google Gmail"},hotmail:{name:"Live Hotmail"},mobileme:{name:"MobileMe"},myspace:{name:"MySpace"},notes_7:{name:"Lotus Notes 6/7"},notes_8:{name:"Lotus Notes 8.5"},outlook_03:{name:"Outlook 2000/03"},outlook_07:{name:"Outlook 2007/10"},palm_garnet:{name:"Palm Garnet OS"},thunderbird_2:{name:"Thunderbird 2"},yahoo_classic:{name:"Yahoo! Classic"},yahoo_mail:{name:"Yahoo! Mail"},webos:{name:"WebOS"},windows_mail:{name:"Windows Mail"},win_mobile_65:{name:"Windows Mobile 6.5"}},b.defineTest({description:"Does not support 'font-family' CSS attribute",clients:["gmail","outlook_07"],callback:function(a,b){var c,d,e,f,g;f=b.findByProperty("font-family"),g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push($(c.selector,a));return g}}),b.defineTest({description:"Does not support 'font-weight' CSS attribute",clients:["gmail","outlook_07"],callback:function(a,b){var c,d,e,f,g;f=b.findByProperty("font-weight"),g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push($(c.selector,a));return g}});return b}();return a}.call(this)}).call(this)